<!DOCTYPE html>
<html lang = "en"> <!-- language flag, used by screen readers -->
<head>
  <meta charset = "uft-8" /> <!-- character set definition -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, minimum-scale=0.5" />
  <meta name="theme-color" content="#2d2c33" />
  <meta name="Description" content="Author: Josh Newland" />

  <title>Josh & Alice</title>

  <link rel="stylesheet" href="styles/index.css">

  <script src="./scripts/Utils/EncryptionUtil.js"></script>
  <script src="./data.js"></script>

  <script> 
    window.onload = onLoad;

    const successText = "Succesfully decrypted this message";
    const encryptedText = "x3A5fKg9Hkc7/wT/4qbPmqqFaqE2e1XcwCRoggw1weRrY9WGo8TaoTmGl+iCGy2R";
    
    let contentText = `
U53A26WUXKV10+hTTIay2ja5G6MrsE1/7nb7bxxcEk4YZ8QUD+S+WT1EZxYgLkS0z2wVdo57DZYWuXUuVLmKb5fmsL5+W2bitWpn
8VSBMnHUTKQzOTdjOtnJOs4ElONpdRYVwP7CYiIPiF8Tf5q+rTMbdAxeFTBMyd1qMQdtOSyZlJ1+/syrBI9m7TTd40SJfX09Yf/i
L4UFlDnH2+OC5XrH+kr+MhvmUczuHpcYNdJu8KArC9R8zXzmGcaFxDOrmM7exDis0uE1lZPEqU16htHFijEmlS8UuzzqtPDvFdsw
A2Czvb9agRXJZDIl5YrZfXSETVACrBTVtQcWdrKm1NT6xLuRcDXXn2qMHdwzSNLh4q9YdPpXNcyRECY/d8514f/diwoD+2Vus97I
EXOBja50VuX/ZDKjgZkczCyr40A7upHK4rFd1mGFvBZf/eeQHTjwVj3tC0pcWp+l7q2JHnsmCFA8wt7jERrmOKp+ConCByjM0qdb
u915etH3xTLGcaokWDJ1x7xeGnxuNRX9zrev/8Xv2Ka0MqF3MTqLZve4r7snewj/CLoFW45ScaWviENu6/VZfZ6/ZEinjPrH4VNF
t6ZofkseUbqGvyPnXTAjVV3Dz5ym9iCiJn+BA2AAVMWwQv/yM34dcNkzXca7woFyBzlnuHEuSryZliRjfYQUGLYIw3dC+RVSqKIv
3tHtSHLG4BdVCniteRYesdF09ZwsF7c3h6kh9HMPyM6HaHLtQzObcaVabZuJcgiP+BlJiYJ6G4kxYAaeRkirbWKC62wO5Uu4pj05
r+laFj81BzI9qaap0QV5U6L6cj8/k/vsyBusNYYirxq27BmUMKsWyt9bslf7Fbe5oMeDqymRxbEZyr4v6vtlemjnAC0GAy/8BJWf
cChg1qKXhJMDZh1n007hpVOGr/w4FYiYcKT+uXRnscg0JxJiNqaWeRzhpFqCLLRJHILDSuQYISNgRXo9a921MKV5JdfvXAJo9KcK
IHIdfiuLnHiVPIOL9EZqnEJ355lEPfxVG33791uRCievLsSPAOPocfil6cMnUTI/Y2NyIltLsJ6Am8VOauFufaE/0wWRTU54W9Ta
iR/I9SZeRlpgFPJqQF2eT5ddKKRDgPXzz2t1+fLhy718csG5AIoCDj/Mw1X50X7LOKtGlMhHXf3U23lQBMdzpLicB3XT71c8THhW
+Cg/VyygnHU8xzQwxQLgvBtI+tTWU159GP9tXdTYz/nxNSLY8yX3a8hrFCURVw8/HibZK7fa96ucllVOMGhNIFEdAzF2DwAJn16U
oKRzExphh9gZJ584u6++Yt3A/IsicdcHCk0KVFv2ch5860A+lEzI9Fqci65z5LJ3/q6udBXnU+NS90qOcxfrUCXnv9pjOO0dhZss
m+l+uasozGJO4pi5jwzr99Yjdk6HqD0ASgghZtlS7sJ3+CAU2BPBTTXRiLKyf0/QOlrGVxjFQwAyMUBEMfXykIBAdH9rqPJ3lQz/
oV3MNSGO+BIBrjq+qGxWskrq/OlxCkSCYbXzSbHpsr3z3jAFxGnFJJD/tW8uDJVyHdabEW/k6yXFtPYRqFhlgiUxRXfveaUqTJiH
4p5HlGV4n63eVXO6e+GXSq4fuJ36xwt+Yv3mEpYaGg4KEBNNSng46PESUuLRuL92X/JiLB6Wx1nvyE09AiIiMA5jQH9H8i0VzU34
rnrBl8ugLZpLFt4xhvvxEULygp2DXSREHQa6j5JYXfPFdAr8yZkCHyuazq7UtWF87ZAxyfzllQ21/DJe9R6QK/JMKScql6ez3e/i
dm29tHRK+jXv8JnS3eOHMrFs2Q6r4TGEfE2/JZTA28lHNWMjnMFHoiQaZsnXLx0F3W/3aQOrhyKRg3VV1Xoxwg5cTdhP/Bctwjqj
40DtwLzJ8GgdJiGCYgeTvNlN7AsuDrQeKig9uvdILc7ns7HnCy/xJXU3ur86TpWyulPv0DTMhpelDubHKGsh0q7rEN1/KZ7HcsFh
b8jYmXvELnQ00Bg5dTyDjaGW5nsymonpqX0cwpqIPpbmlsyu8J0Q9yO0wsPCy/be7AxNGPUHcHwISIc1W4RY6/Q+gTlME1W7G3wl
qQ/JajzbusfuBgxvcDqzBvkvbrvS5DEnz/VSVoBnLoRA7APuEsSdsb/e7O7YCK3N16ZzseSi+YQeqg3+WE8FiKZokQiSLFJvIOXP
a0Zvnoxlv7PqW6w3H5wV8AE6U00P1V/mDHHHBmsUuISfR1YxE3nk+VSJ37ebfIK1e8Vetny/obtVP+sUbYCzur+4lIgqXWYuBDgZ
SDtPw54dcn73QQ3x2O0JCC0bJ7zX/TF9ihw0sKyLrCDMbUirk5oqN9EmJu2RHexqOmHsURyzNIzNnPV3fFkDBIoR0dSXTJ8nzJQt
9dIJVZpAZGzkOZTS3LlIsWjx+RPLHZTnId6BN2bCeZIkyWb3xsj4KzkHj5Y0DAIK0L4gAtV4gdN62MDtVOWHcxJHCtor/UneuGUb
B8rpykv8zNR6MiTrlNMHflk2C3Xuj9B9RsTvXSeIaAYgscuyg2dGqKs4OGO6MXzGC/3DU5kttKeQtS04T1xM8kR4dkeJNmrzSfPQ
RrQt6OP4UwWK2FD6QMjEfIRKMEJ9e54oYiLzShAV3vkwmlzHK+1jsxAYpAAfSN8juLINYkC21/vZTkwcNIcJireZLDMsa8SgGJRf
eLqIdicdR3XA8coy0OTKUFLqCJonZD4lBzgtxtJGSJ3gw9aOAUEAq59sEw18vE52coNmWQ8hVh+agLBO6qpEHzT87vw3lJwUANAI
f2i/1VVvuK677Au9O49y4er438cWImoxxGCspBCIhdHC29QrRDXkDgC7R4VIUgX7HZt6YsWPDEV6V6far5U5EREMG4we8oifAylw
YMTwrGbhiFPZcqV46C9jXUnSMIl16EmEgn9LOFRln+IX0Y5aIwardFwbBwwHullvQdgRC9yYoUYoVlqJMFNg4K5xiUyMeWgUb8xK
Qi8juk/nlWdrXyGFzMTt1wXZu6i+voOhyM8CXnE3w3ZoKeQNehtaIXqkGGv+93FzHzgtud1pShqSZnIUj/I0+yC5RjXVR3sjauTl
5IonaDlZNClT5s0MiExLjbFbZ/QdeVr3hvIoKqwgfF9F6R6nrBLWDKT3XYQcUk4Kt6C9ZPBYObewLN46du6TadiWD/NjcFCJTZkQ
3TAiNsvk1naq4T/JCQxQ9ssdOu4apiNsVEA52Oyn30KHmLFWSkQm2QD76Yk//KICPRVCl2w7ndKpWjStvgY+RVZfQrEkrsFztAqv
PKGVnuyoxa1r4zPZ0jKVVIaGa74Ek+4YwTllVGoJzA7dJk/Ih+IVwA18CMu256POoTewGuIXHJpJmN9N1pDcDMEfwS4Fmjo+eKcR
KmPxz4ZPorEft0cZPvPWkbkpvKelHeOHEpJXMmc8fowjNEL4atfeCLwgyZmy038U1NgenT6UQ5BoXkMteHeqaJKwkBla8tqiqkYM
T+eoeXP8ELhSPu5enFBZnHT3OvaxO3WCFfeEDfdf4K1BhrBjR1oxP+CSfmaXCxrxmwHblHieguQa2wymmahPBXQvhg9/tgSirq2F
CbEayZUuBUH2CXqT0gQVBQF+VNMPCL9T057rQQuq4lzA5aHOQiWN0N2SLEmCBK2VoB3BDU0oS8uQHyDnXL5u16aPMVEWU5od5MZR
s05zJDMzWRiZXUkErWcAmk78gmfW8Aw3Mywwkw6WHK5HjVXdhi+amzhZlBzQRwCs4Qj602nX6T/3OIMI72iCyp72j/gm9ftNRiHI
TENOp8efnRTTCAqSFau1MtjDlum27ZI3VeBWeZq530g+pznJ5bB49RBEQCry0s1eDoincSHOaxxAcgpItbgYAt2HO2NMiAtJeDQE
5yQaU6e/3ja8JWmfnjDWFowvKd0BC3JAbFH3nW7fDPTu0cXazuMyski8pjJ9Y901S/jMlt2jLPtIVug7Py6pgVgoigDWmHKgMoya
kaFvMO0hyUymBF+vrEcd5z7fyS3ZL7uBNv/WLbGwdJFgVrHvT+ID7iSY+99jUH2wDFcz6aKOa3v5+w11PesVqYLk6w8RZVIb1SVw
TC3LwvuKpo0n8lsUG/r1UeyilEY1yc/1KaUzndVt+eHXxtOLvq/rJsXs+yuKwyaUyzBouoGLu3bPFFC3pPVFGfUVOcbaNpGyuI/2
hOslFq8LTd9eBPZyImyKWazxgfdPYWAOOg1YAPNQH9rCSMQEGElj1ZcnOhPH276mrewQSmLI4g7LNsiO1zephApY0VDu3AepvK/z
mjZUwt7+IyBmGODjIjVYw/NhtIUHxuHAHRjhZ48934PeA/1LtmrXs3znG5VCgSwsHPOemmHdPtSlZhyl7ZFImiYOnSk0/KxgCc1c
6QIbcAV3r5AFr3q9bCZlhWuE8w0mlClTu9rPGsOyvEP2nFl1KcZkckk9rnZHPQoyjK0RBM7/kdS1/ZmzXRAQk+h6GeKXYtKtuUY+
jH75kYx9JPGVPYn5LxJkYWg+4ZeGo50EUfgjPwPA0tQ8o1Wc/+lbRs8flCtL8vHuYbEP3uWw/JctAku1d0YclMl/K5MhVSRYywaA
/zkNeFB76ir7aa3tHXq+soCDc/LkNzePOGnoj3p9ZbVWj/lqNXrCf1yzMowgcxH6TxaLNpKHyoLRCcJhKwlEpqHhmHjwX4un5hC7
YBRXU81eny9Grdb51uT6vNoy/IZSylajwXqIX3MLRw1dDYppQSUvihL0H+bDHeUeoCo2aP72jRyPmkJCuzyFsBQBGxg+iizuNMrV
Bf1L6Jd2w3DUhbrihwAjkkLwUni5FMladw2BQAZtzvfhesHeRzKIaiHitf+rMMlNKZu42APAGa0zjNoLq2sXcreKXFhUKgtePIrs
xnw4IijE4/0N/oHOQqYv0SojxWUBTsxwXceAbSSNWOdBvvq8J8YblsJOA0d5use7LSUgo2M6vJwfa+XA9d2X7KAZLUNoPHfMQMUS
lmL3ahQ8sCdA+XXFgs03bsj1fdvyWc2DqtTqJB2uAEke4INw76/NvRfinW5zEymMCfMIkqMH9VzcyVNipMzaH3XhVVKJOxsPA6cO
YlnPkKgWvdGtHLGU8v98KiwhHi62KMtumGz/pNMrfw1nIHM2mtFXGdWtegIbU7B3CWK3vrtOU77WpW5yKMLwNXqkykuEepBnqNWS
IgSofk3IOWGbIyCrLzRjojbuL9iq9kY8V/5aJfONCwdddCwcDJoEE5R7g081HjBYqNIT7Zne7oKT98YMLLqqGj1IyuWl+RJlOlvY
hVAP5ajD6TxjgEHcC4NYbicLo/JHqsrDL1N9cS5y15IGaBtLKZFkjUnC5/hPyxSsXeWcCHcl3lvycLM5K7vyZfb0Kif+lvEDQVlJ
w2ZCK2IHC2hZfEbMYaVxPWwzndkU2QDk73YKTX7PPaQPTf86G/krPpU6KhNxszRkIznCs/FxZvvHmAfB4ePy+kXpXqHCMFH8MWqq
sJdPhcAJmFyi4Dod/6a2MCrJ2WJYT1oZRo/vnjxlDuhKJf8SvZJQwOfXaW0EndZVBAHDYnTdTGbTu4U79n7BdBlFZZF3nWjX8E/o
JxdqAog0AqYwvQ6DSJ5+fUsYdNHHU4YaQfQ86Dmqgd70Ojs8YLSalp6RpcZjSvHOG2ux7stYUPl8OOcQ/Z/+VC3RsJ1rxiPdsqRI
RDYdQOgmkQCijnJ+eOzy7cvHspvoFbwq6AE9osE=
    `;

    function insertEvery(str, value, nChars) {
      let result = '';
      while (str.length > 0) {
        result += str.substring(0, nChars) + value;
        str = str.substring(nChars);
      }
      return result;
    }

    async function onLoad()
    {
      document.body.style.visibility = 'visible';

      const decryptionField = document.getElementById('decryptionField');
      const decryptionSubmit = document.getElementById('decryptionSubmit');

      if (plaintext != '' && key != '')
      {
        const ciphertext = await Encryption.encrypt(plaintext, key);
        console.log(insertEvery(ciphertext, '\n', 100));
        //const outputText = await Encryption.decrypt(ciphertext, key);
        //console.log('outputText: '+outputText);

        contentText = ciphertext;
        decryptionField.value = key;
        onSubmitPassword();
      }
      else
      {
        decryptionSubmit.addEventListener('click', onSubmitPassword);

        decryptionField.addEventListener("keydown", (e) => {
          if (e.keyCode == 13) {
            onSubmitPassword();
          }
        });
      }

      //confetti
      const confettiContainer = document.getElementById('confettiContainer');
      const colors = ["blue", "green", "pink", "purple", "yellow"];
      const animations = ["confettiFall", "confettiFall2"];
      for (let i = 0; i < 70; i++)
      {
        const confetti = document.createElement('div');
        confetti.className='confetti';
        confetti.style.left = 5 + (Math.random() * 90)+'vw';
        confetti.style.backgroundColor = 'var(--'+colors[Math.round(Math.random() * (colors.length-1))]+')';
        confetti.style.animationDelay = (Math.random() * 8) +'s';
        confetti.style.animationDuration = (6 + (Math.random() * 2)) +'s';
        confetti.style.animationName = animations[Math.round(Math.random() * (animations.length-1))];
        confettiContainer.appendChild(confetti);
      }
    }

    async function onSubmitPassword()
    {
      const decryptionField = document.getElementById('decryptionField');
      let decryptedText = '';
      
      try {
        decryptedText = await Encryption.decrypt(encryptedText, decryptionField.value);
      } catch (error) {
      }
          
      if (successText == decryptedText)
      {
        const decryptionDialog = document.getElementById('decryptionDialog');
        decryptionDialog.style.display = 'none';

        const content = document.getElementById('content');
        const decryptedContent = await Encryption.decrypt(contentText, decryptionField.value);
        content.innerHTML = decryptedContent;
      }
      else
      {
        decryptionField.value = '';
        decryptionField.classList.toggle("flashComponentBorderRed", true);
        setTimeout(() => decryptionField.classList.toggle("flashComponentBorderRed", false), 300);

        const decryptionDialogHeader = document.getElementById('decryptionDialogHeader');
        decryptionDialogHeader.textContent = "Incorrect password, try again:";
        decryptionDialogHeader.classList.toggle("horizontalShake", true);
        decryptionDialogHeader.classList.toggle("incorrect", true);
        setTimeout(() => decryptionDialogHeader.classList.toggle("horizontalShake", false), 300);
      }
    }

  </script>

</head>
<body>
  <div id="contentContainer">
    <div id='headerPhotoContainer'>
      <div id='headerPhoto' style='background-image:url(images/20230611_175005.jpg);'></div>
    </div>

    <!-- postcard images -->
    <div id="photoContainer" >
      <div id='photo1' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230513_152654.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo2' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20220723_172128.jpg); background-position: 30% 50%;' ></div></div>
      <div id='photo3' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240708_065816828.jpg); background-position: 50% 55%;' ></div></div>
      <div id='photo4' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230613_163021.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo5' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20231124_133910647.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo6' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240614_175004575.jpg); background-position: 0% 50%;' ></div></div>
      <div id='photo7' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240712_090948734.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo8' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240710_124608957.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo9' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240714_043319121.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo10' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/IMG-20230602-WA0002.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo11' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230620_195615.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo12' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20221023_153542.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo13' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230619_112548.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo14' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240711_124517070.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo15' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240712_051523311.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo16' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240511_115149538.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo17' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240613_100115969.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo18' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240714_045737237.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo19' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240818_130441568.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo20' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212341_aa046eb3.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo21' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212244_c832a3a7.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo22' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212445_a2101a82.jpg);background-position: 30% 50%;'></div></div>
      <div id='photo23' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212757_2378f61e.jpg);background-position: 20% 50%;'></div></div>
      <div id='photo24' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212916_4f33697d.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo25' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/213046_8aa38da1.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo26' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/213046_b5ee126a.jpg);background-position: 50% 50%;'></div></div>
    </div>

    <div id='confettiContainer'></div>

    <div id="content">
    </div>
    <div id="footer">
      <p>Website made by Josh</p>
    </div>
  </div>

  <!-- password dialog -->
  <div id='decryptionDialog' >
    <div id="decryptionDialogBox">
      <div id='decryptionDialogHeader' >Enter the password:</div>
      <input type='password' id='decryptionField'/>
      <button id='decryptionSubmit' ><div class="buttonIcon" style="background-image : url(images/lockOpen.svg);"></div> Submit</button>
    </div>
  </div>
</body>

</html>
