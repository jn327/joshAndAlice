<!DOCTYPE html>
<html lang = "en"> <!-- language flag, used by screen readers -->
<head>
  <meta charset = "uft-8" /> <!-- character set definition -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, minimum-scale=0.5" />
  <meta name="theme-color" content="#2d2c33" />
  <meta name="Description" content="Author: Josh Newland" />

  <title>Josh & Alice</title>

  <link rel="stylesheet" href="styles/index.css">

  <script src="scripts/utils/EncryptionUtil.js"></script>
  <script> 
    window.onload = onLoad;

    const successText = "Succesfully decrypted this message";
    const encryptedText = "x3A5fKg9Hkc7/wT/4qbPmqqFaqE2e1XcwCRoggw1weRrY9WGo8TaoTmGl+iCGy2R";
    
    const aboutText = "ezXxwocU+I0nlCdsq+gFwSoiM1FWjXmaMqzHmmGR4tR2zEgau6fjyYOFy33wDL2MXNbivaKni9apmE1CV8hdtaG+OtbWsYgzBrxMp5TTW7ifI1wkenh3FeRQZM8sjwADZDj4o8A2LJINtV2ldmRilpl38Ra3ha6SPDLrUs8ZTqCK1RlAKVvJamU4TfAp+smj9IdVX9h0cXmdGEAT4xxNeq2Fr0VUgdXpcNMgMRd41PH5ObnMjKMcIt4YvgI2qPVVwGc0CVN7azS0WTSjLvW4ZF+o+DUXFoJBPI7HM/rDZm9j2NIa2NUKOZJOrE8qvjtwmMPjIIVDcSE8YCTWIeZ+zmy7Mc9EGOtTuBYSaonuBoI3ny4ZP2Asq4lG3+a5usDkrjbMSe5HO/TfU822grPbWcrXTlXSzo+ZQuXMM7YTVimynManX6PEeIK/s1ZJBjkUphf2FlVWy1No6cU67nT/itxiVmB73mX59BTSm9spAHLXyhq7886LHO4oyRNQiu+1kZ9I6DIzRpoLngKiaPRuVVIEut5DdUvhZE50YqFkMR2DNkVeAW09yDNrBEdrXqIto4ljXOz0aiD1bZO9W7opRiNCqXBb5PCz/49FWmGzgLNssTAuKnGNuM45jdHEik9E9CPQKhr23bF7sTebeu8vwh2dNtHK2d1PqROE5lVLluWD2l50SKcxk1tyOn9QmNEeAeq6qKIaryG1WY6t3lgrmtEeizBWq/DR6sce3+ANSGMv1MdjJgie4wv9ByIfxx6NilwCre157j00OPIo7oz+6ucAjIfNMTo2eXbiRPBNTWUQHX1+W0UjEX/dBGHgrEJZeHxs3ZKej0J7VPp3w692xGCLqUgkuwS99yJHVKxeZwYaHkg+BIWUv7tEcmRWXPkaZPc6VZngz30I1JiNEX6BRIiGpcalo1pyA48prTIjniEDVovsWRO5DMDvBEAkerNDaZ+UbU2LktVQK5ElJLVximhHe2AM37bvoANjc4qG44JCkVpCbcBexvNMmx82LROcciar0IvlpxsxJ0EP8Ek83Jx0twj6jS0VXWqkLucHaeOyZNdOjkhyNtorMTn/5EkT";
    const locationText = "TDSBiz2pGEcTjAaf+WgO500XFnYCQAzy3ImfoMOXtuzSPWotP4Do84ZEIzjSRsb6C4fFt3ViYcn5PLOglzGlfT0lodWLFfHAOUfxjOxCFbIiZdyERvl1BK9H0kPbafcisjT0ncGVUIQFSZAUX+jFrJ1bQI45Y86FnhhZIrWsYNJXymln/FnlUjPs2JDateb9kj/gbBhyIW6AEdkMvnInhF/jg5P3S2vtFblR6LI/SQ6C63IAkVHwhbjvNi7TR+/wTGhkbBviEyRB7N+WqpgmXUP8C3eOBjA0g74w7Ip5uEzjwSePaoIyQv7LRKLJsjhOJSLLxP7/Og4TrsEzcr1OvLMpOG34iS8rklHGSqte/Psjg+Z4aCsxyF6vjtkj3khNFszYW1Mu7z1yECM0i9/lNbwM65LGAH3wrZxHtg+Dbp42taI0+lNrqLxyiSRmCSpFlcg05ZnPxVHFQdzxwM/5fUvCabGE4wk1vEo8nEAc/muu9OtGHeWH7L1LtOfzQbPcpvIUSUdW1dnIUQgl5+yR/6nJE38UPYridn6kn5FP9SniGR492uWtjw4Yo1tV54ljmLEpFUnMVp/h4sPgB50RM2+ac0xlHM7YowgxM5fbSJ6sGmvduNOyQ2EG6NCitXXOR082K0hywRSRbHKKig9nEL9U/yu/pNNlv1gPWJ3EPXFUq/pFNjbifTlqIItmCcbabNhRbI3fWwMZYf5CzmDmvdSqWADXblFcrqpyZi3et/IXxLJTXu6z7Za+4dMykA6Oix6l4YFG7EsiQRL6yom2ZtlHbzQr+7W8WuWxAW7KUfSBzIqdQ8IstnPW9OU8WLgb";
    const faqText = "Tc9khw4VYIz846athHDhDZCexuBDEmBz2DXhEVqfdojvSUdDh7M1ITyjgyA/twxQx1C1ycap/Vg+Fik2t1XBevhxFaZ7Vh/hXF8CUFsk4DME3hQR6EOqhxYyUOM7p16j6Y/+ZODO2oOcLej6YWZp/raBSf66cHAlEuQLAFteukQOe/ulzsWwZr90UiMQMDNhhjMSjbxUoyH/q4JfObCDki7T/26kM0L0fgHcPxXt5z7dWTm8pVUybX6G2x6c3kOI4IpsFFIKteRsejLLiN/XnnrHk/mmpoUJwFLQjOzY+pGnte8Z55rAbb24lyXgfPLqFCY3ppZoJn5oEBwC5bw12BbgPy5BRcZ5AN3fHGlE5Ejj8UC6ZjgTbMtl9mnrfdmeOjP+gFUkYRO3QldfkrNyZulupe/yuaGs2YTVxUiFdG7FYjCkTbqZ+jvV7YMnTOWJSiw6eXw0461lZjBfTRzZ5lbr/E44u93fz/ato/UHZ+DPw1wxZwrCAMwlo//aa3bMAPtYyx8kwWUEc1MhdSqqL1pZlY5rkkkI6aoMO2rYr04=";

    const rsvpText = '6Xtlusnl98sXcUITcHJQQ4nTga244OcdaEJbLtg9LmGKnwi9fQ7K9V+CUao1neWlgQ5cDiuE/V5UhJLlT5/3NVLK5OVS46dcBS8J+PkZz0KpiI74Rs+pNPzN46t5aTOQwEYwFYxBBcFiHVbZvtLIYQ==';
    const openMapText = 'bNuhGNz1XrlObtGlOhL2gusqMuhZCnZMoQmuJ1j4fccGVKJZbUKYFAv5mVcG6fPh';
    const addToGoogleCalendarText = 'htkn1kFUgNP9bT6cQo9xwuxCJ79YnSxw28h/hl954dE0htAD6RK8UKQR3jmIWdZGG83HJe0KVN8lbqgMDxWr7EiPG8YisH/NNKhZvl4ijZnZbft221r/b22R9OKK4eBQweGtq4MB9EPFYRKX32pom1Itt+FNdCn4S05wAW1GmXDqBcygOJusL8WgdecjXp0TMBJhv4AsJJ9uTqlW5m4El9wT/IUBZVCJ1Guj0E38FU8DSxa8idXXAJhcp7fbdyhV6umLswP85n+j5Gq3B4Idwt3oLZcI2WSJFiH47xMe4pE=';
    const addToOutlookCalendarText = 'KrmR8pAKFkiwHl79cfmqqLpXc18xLxm3CRFGr+lWEMyqvZ7bqqDHu+wQRuoW0div5dUjFcBZyUcEAj3vhDkTlYGaEyaqkvXY7i/ObsXOU8v3DxxNRqIv+UXh4tdb9i8e4/11Vo2ysPY+E21YMrrYMU8EigN4BtPntdlZEiH8VkhBi0JY6Z0+qRV6WtqRrRQTQ+wQFE9l00VMkQ3yskt5Gk8Yyt9NbVYumzFa/9Y72UD8uzDfkGwW/r5sId0jt9NYtnWI0SC249A8HkjBi04m8sR5Zdf/l79ewAP6kuqEQ76k2rxPVDXaG1yccnOb+Xzfl+2yrDr+NExCpWofIsmgi9Np5F8oyUOK/Oxm5l08AjIWs31vVKtYWkqyFUbk7UL1a1blgK9ER47kYFSNbZ7N+DYIrAQ5u9KJ2JnlYG/BFtg=';
    const googleMapText = 'bNuhGNz1XrlObtGlOhL2gm5AbF34ovySgFwm8HRtjzdQ12B7vbA5U1yFYQCkAdc3O34AZj3P3iGpl3CBOLOchb+XAASknF/Jou4W4J0eLgetjVCGjlFYR8vUKSRcFUIul8yriCgi3NLYmM9N5lpsTg==';
    
    const key = "MyPassword123456"; 
    const aboutText_source = " Integer id pellentesque nibh, rutrum commodo eros. Etiam tincidunt porta odio, sed cursus dui venenatis quis. Sed ligula ipsum, lacinia vitae erat vitae, accumsan fringilla nunc. Pellentesque at sapien in erat venenatis euismod id eget est. Nulla vulputate ex in nisi fringilla fermentum. Suspendisse ac pharetra ante, ut efficitur nisi. Mauris in augue nec odio pharetra ornare ac vestibulum diam. Sed et varius augue. Maecenas auctor quam sit amet arcu placerat pellentesque. Sed bibendum est vehicula enim pretium rhoncus. Sed placerat eleifend justo, sit amet imperdiet nisi efficitur ut. Integer a ornare tellus. Maecenas lectus ex, posuere a massa ut, aliquet dapibus mi. Phasellus varius neque porta ex blandit, sed aliquet augue sollicitudin. Fusce ultricies enim sed odio dignissim convallis.";
    const locationText_source = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis porta odio non lectus laoreet, aliquet eleifend enim congue. Curabitur congue lorem viverra lectus auctor, eu posuere leo tristique. Nulla consectetur, eros eget sollicitudin tempor, arcu odio pharetra ante, lacinia ultricies ante lorem ut odio. Vivamus elementum lobortis felis, ac pellentesque sapien molestie sed. Duis at malesuada odio. Ut non lorem eros. In vitae lacus egestas, dapibus metus ut, ultricies urna. Aenean a sapien feugiat, dapibus urna sed, volutpat neque.Maecenas fermentum urna sit amet dui accumsan, nec efficitur nibh sodales.";
    const faqText_source = "Sed placerat eleifend justo, sit amet imperdiet nisi efficitur ut. Integer a ornare tellus. Maecenas lectus ex, posuere a massa ut, aliquet dapibus mi. Phasellus varius neque porta ex blandit, sed aliquet augue sollicitudin. Fusce ultricies enim sed odio dignissim convallis. Aenean a sapien feugiat, dapibus urna sed, volutpat neque.Maecenas fermentum urna sit amet dui accumsan, nec efficitur nibh sodales.";
    const rsvpText_source = 'https://docs.google.com/forms/d/e/1FAIpQLSeEdKOuRsGdidsDh1KgbABp_9asP0Xc07b71gljjErC9hbLwQ/viewform?usp=header';
    const openMapText_source = 'https://www.google.com/maps/place/Cambridge/';
    const addToGoogleCalendarText_source = 'https://calendar.google.com/calendar/u/0/r/eventedit?dates=20250812T180000Z/20250812T230000Z&text=Josh+Alice+Wedding&details=For+more+details:+https://joshAndAlice.github.io&location=+Cambridge,+UK&allday=false';
    const addToOutlookCalendarText_source = 'https://outlook.live.com/calendar/0/deeplink/compose?rru=addevent&path=%2Fcalendar%2Faction%2Fcompose&startdt=2025-08-12T18%3A00%3A00Z&enddt=2025-08-12T23%3A00%3A00Z&subject=Josh%And%20%Alice%20%Wedding&body=For%20more%20details%3A%20https%3A%2F%2FjoshAndAlice.github.io&location=Cambridge%2C%20UK&allday=false';
    const googleMapText_source = 'https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=Cambridge,UK';

    function getElements()
    {
        return {
          decryptionDialog: document.getElementById('decryptionDialog'),
          aboutTextElement: document.getElementById('aboutText'),  
          locationTextElement: document.getElementById('locationText'),
          faqTextElement: document.getElementById('faqText'),
          rsvp: document.getElementById('rsvp'),
          openMap: document.getElementById('openMap'),
          addToGoogleCalendar: document.getElementById('addToGoogleCalendar'),
          addToOutlookCalendar: document.getElementById('addToOutlookCalendar'),
          googleMap: document.getElementById('googleMap')
        }
    }

    async function onLoad()
    {
      document.body.style.visibility = 'visible';

      let plaintext = '';
      //plaintext = aboutText_source;
      //plaintext = locationText_source;
      //plaintext = faqText_source;
      //plaintext = rsvpText_source;
      //plaintext = openMapText_source;
      //plaintext = addToGoogleCalendarText_source;
      //plaintext = addToOutlookCalendarText_source;
      //plaintext = googleMapText_source;

      if (plaintext != '' && key != '')
      {
        const ciphertext = await Encryption.encrypt(plaintext, key);
        console.log('cipherText: '+ciphertext);
        //const outputText = await Encryption.decrypt(ciphertext, key);
        //console.log('outputText: '+outputText);
      }

      const elements = getElements();

      elements.aboutTextElement.textContent = aboutText;
      elements.locationTextElement.textContent = locationText;
      elements.faqTextElement.textContent = faqText;

      elements.rsvp.href = rsvpText_source;
      elements.openMap.href = openMapText_source;
      elements.addToGoogleCalendar.href = addToGoogleCalendarText_source;
      elements.addToOutlookCalendar.href = addToOutlookCalendarText_source;
      elements.googleMap.src = googleMapText_source;

      const decryptionSubmit = document.getElementById('decryptionSubmit');
      decryptionSubmit.addEventListener('click', onSubmitPassword);

      const decryptionField = document.getElementById('decryptionField');
      decryptionField.addEventListener("keydown", (e) => {
        if (e.keyCode == 13) {
          onSubmitPassword();
        }
      });

      //confetti
      const confettiContainer = document.getElementById('confettiContainer');
      const colors = ["blue", "green", "pink", "purple", "yellow"];
      const animations = ["confettiFall", "confettiFall2"];
      for (let i = 0; i < 75; i++)
      {
        const confetti = document.createElement('div');
        confetti.className='confetti';
        confetti.style.left = 5 + (Math.random() * 90)+'vw';
        confetti.style.backgroundColor = 'var(--'+colors[Math.round(Math.random() * (colors.length-1))]+')';
        confetti.style.animationDelay = (Math.random() * 8) +'s';
        confetti.style.animationDuration = (6 + (Math.random() * 2)) +'s';
        confetti.style.animationName = animations[Math.round(Math.random() * (animations.length-1))];
        confettiContainer.appendChild(confetti);
      }
    }

    async function onSubmitPassword()
    {
      const decryptionField = document.getElementById('decryptionField');
      let decryptedText = '';
      
      try {
        decryptedText = await Encryption.decrypt(encryptedText, decryptionField.value);
      } catch (error) {
      }
          
      if (successText == decryptedText)
      {
        const decryptionDialog = document.getElementById('decryptionDialog');
        decryptionDialog.style.display = 'none';

        const elements = getElements();

        const decryptedAboutText = await Encryption.decrypt(aboutText, decryptionField.value);
        elements.aboutTextElement.textContent = decryptedAboutText;
        elements.aboutTextElement.style.wordWrap = 'normal';

        const decryptedLocationText = await Encryption.decrypt(locationText, decryptionField.value);
        elements.locationTextElement.textContent = decryptedLocationText;
        elements.locationTextElement.style.wordWrap = 'normal';
       
        const decryptedFaqText = await Encryption.decrypt(faqText, decryptionField.value);
        elements.faqTextElement.textContent = decryptedFaqText;
        elements.faqTextElement.style.wordWrap = 'normal';

        const decryptedRsvpText = await Encryption.decrypt(rsvpText, decryptionField.value);
        elements.rsvp.href = decryptedRsvpText;

        const decryptedOpenMapText = await Encryption.decrypt(openMapText, decryptionField.value);
        elements.openMap.href = decryptedOpenMapText;

        const decryptedAddToGoogleCalendarText = await Encryption.decrypt(addToGoogleCalendarText, decryptionField.value);
        elements.addToGoogleCalendar.href = decryptedAddToGoogleCalendarText;

        const decryptedAddToOutlookCalendarText = await Encryption.decrypt(addToOutlookCalendarText, decryptionField.value);
        elements.addToOutlookCalendar.href = decryptedAddToOutlookCalendarText;

        const decryptedGoogleMapText = await Encryption.decrypt(googleMapText, decryptionField.value);
        elements.googleMap.src = decryptedGoogleMapText;
      }
      else
      {
        decryptionField.value = '';
        decryptionField.classList.toggle("flashComponentBorderRed", true);
        setTimeout(() => decryptionField.classList.toggle("flashComponentBorderRed", false), 300);

        const decryptionDialogHeader = document.getElementById('decryptionDialogHeader');
        decryptionDialogHeader.textContent = "Incorrect password, try again:";
        decryptionDialogHeader.classList.toggle("horizontalShake", true);
        decryptionDialogHeader.classList.toggle("incorrect", true);
        setTimeout(() => decryptionDialogHeader.classList.toggle("horizontalShake", false), 300);
      }
    }

  </script>

</head>
<body>
  <div id="contentContainer">
    <div id='headerPhotoContainer'>
      <div id='headerPhoto' style='background-image:url(images/20230611_175005.jpg);'></div>
    </div>

    <!-- postcard images -->
    <div id="photoContainer" >
      <div id='photo1' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230513_152654.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo2' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20220723_172128.jpg); background-position: 30% 50%;' ></div></div>
      <div id='photo3' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240708_065816828.jpg); background-position: 50% 55%;' ></div></div>
      <div id='photo4' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230613_163021.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo5' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20231124_133910647.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo6' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240614_175004575.jpg); background-position: 0% 50%;' ></div></div>
      <div id='photo7' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240712_090948734.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo8' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240710_124608957.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo9' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240714_043319121.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo10' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/IMG-20230602-WA0002.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo11' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230620_195615.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo12' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20221023_153542.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo13' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230619_112548.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo14' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240711_124517070.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo15' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240712_051523311.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo16' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240511_115149538.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo17' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240613_100115969.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo18' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240714_045737237.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo19' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240818_130441568.jpg);background-position: 50% 50%;'></div></div>
    </div>

    <div id='confettiContainer'></div>

    <div id="content">
      <h2>About</h2>
      <p id='aboutText' ></p>
      <div style="display:flex;justify-content:center;">
        <a id='rsvp' class='button' target="_blank"><div class="buttonIcon" style="background-image:url(images/inventory.svg);"></div>RSVP</a>
      </div>
      <h2>Where/When</h2>
      <p id='locationText' ></p>
      <div style="display:flex;justify-content:center;">
        <a id='openMap' class='button' target="_blank"><div class="buttonIcon" style="background-image:url(images/location.svg);"></div>View in Google maps</a>
      </div>
      <iframe
        id='googleMap'
        style="width:70%;height:40vw;border:0;margin-top:20px;border-radius:10px;"
        loading="lazy"
        allowfullscreen
        referrerpolicy="no-referrer-when-downgrade"
      >
      </iframe>
      <div style="display:flex;justify-content:center;padding-top:10px;">
        <a id='addToGoogleCalendar' class='button' target="_blank" ><div class="buttonIcon" style="background-image:url(images/event.svg);"></div>Add to Google calendar</a>
        <a id='addToOutlookCalendar' class='button' target="_blank" href=""><div class="buttonIcon" style="background-image:url(images/event.svg);"></div>Add to Outlook calendar</a>
      </div>
      <h2>FAQ</h2>
      <p id='faqText' ></p>
    </div>
    <div id="footer">
      <p>Website made by Josh</p>
    </div>
  </div>

  <!-- password dialog -->
  <div id='decryptionDialog' >
    <div id="decryptionDialogBox">
      <div id='decryptionDialogHeader' >Enter the password:</div>
      <input type='password' id='decryptionField'/>
      <button id='decryptionSubmit' ><div class="buttonIcon" style="background-image : url(images/lockOpen.svg);"></div> Submit</button>
    </div>
  </div>
</body>

</html>
