<!DOCTYPE html>
<html lang = "en"> <!-- language flag, used by screen readers -->
<head>
  <meta charset = "uft-8" /> <!-- character set definition -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, minimum-scale=0.5" />
  <meta name="theme-color" content="#2d2c33" />
  <meta name="Description" content="Author: Josh Newland" />

  <title>Josh & Alice</title>

  <link rel="stylesheet" href="styles/index.css">

  <script src="./scripts/Utils/EncryptionUtil.js"></script>
  <script src="./data.js"></script>

  <script> 
    window.onload = onLoad;

    const successText = "Succesfully decrypted this message";
    const encryptedText = "x3A5fKg9Hkc7/wT/4qbPmqqFaqE2e1XcwCRoggw1weRrY9WGo8TaoTmGl+iCGy2R";
    
    let contentText = `
    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
    `;

    function insertEvery(str, value, nChars) {
      let result = '';
      while (str.length > 0) {
        result += str.substring(0, nChars) + value;
        str = str.substring(nChars);
      }
      return result;
    }

    async function onLoad()
    {
      document.body.style.visibility = 'visible';

      const decryptionField = document.getElementById('decryptionField');
      const decryptionSubmit = document.getElementById('decryptionSubmit');

      if (plaintext != '' && key != '')
      {
        const ciphertext = await Encryption.encrypt(plaintext, key);
        console.log(insertEvery(ciphertext, '\n', 100));
        //const outputText = await Encryption.decrypt(ciphertext, key);
        //console.log('outputText: '+outputText);

        decryptionField.value = key;
        onSubmitPassword();
      }
      else
      {
        decryptionSubmit.addEventListener('click', onSubmitPassword);

        decryptionField.addEventListener("keydown", (e) => {
          if (e.keyCode == 13) {
            onSubmitPassword();
          }
        });
      }

      //confetti
      const confettiContainer = document.getElementById('confettiContainer');
      const colors = ["blue", "green", "pink", "purple", "yellow"];
      const animations = ["confettiFall", "confettiFall2"];
      for (let i = 0; i < 70; i++)
      {
        const confetti = document.createElement('div');
        confetti.className='confetti';
        confetti.style.left = 5 + (Math.random() * 90)+'vw';
        confetti.style.backgroundColor = 'var(--'+colors[Math.round(Math.random() * (colors.length-1))]+')';
        confetti.style.animationDelay = (Math.random() * 8) +'s';
        confetti.style.animationDuration = (6 + (Math.random() * 2)) +'s';
        confetti.style.animationName = animations[Math.round(Math.random() * (animations.length-1))];
        confettiContainer.appendChild(confetti);
      }
    }

    async function onSubmitPassword()
    {
      const decryptionField = document.getElementById('decryptionField');
      let decryptedText = '';
      
      try {
        decryptedText = await Encryption.decrypt(encryptedText, decryptionField.value);
      } catch (error) {
      }
          
      if (successText == decryptedText)
      {
        const decryptionDialog = document.getElementById('decryptionDialog');
        decryptionDialog.style.display = 'none';

        const content = document.getElementById('content');
        const decryptedContent = await Encryption.decrypt(contentText, decryptionField.value);
        content.innerHTML = decryptedContent;
      }
      else
      {
        decryptionField.value = '';
        decryptionField.classList.toggle("flashComponentBorderRed", true);
        setTimeout(() => decryptionField.classList.toggle("flashComponentBorderRed", false), 300);

        const decryptionDialogHeader = document.getElementById('decryptionDialogHeader');
        decryptionDialogHeader.textContent = "Incorrect password, try again:";
        decryptionDialogHeader.classList.toggle("horizontalShake", true);
        decryptionDialogHeader.classList.toggle("incorrect", true);
        setTimeout(() => decryptionDialogHeader.classList.toggle("horizontalShake", false), 300);
      }
    }

  </script>

</head>
<body>
  <div id="contentContainer">
    <div id='headerPhotoContainer'>
      <div id='headerPhoto' style='background-image:url(images/20230611_175005.jpg);'></div>
    </div>

    <!-- postcard images -->
    <div id="photoContainer" >
      <div id='photo1' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230513_152654.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo2' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20220723_172128.jpg); background-position: 30% 50%;' ></div></div>
      <div id='photo3' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240708_065816828.jpg); background-position: 50% 55%;' ></div></div>
      <div id='photo4' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230613_163021.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo5' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20231124_133910647.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo6' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240614_175004575.jpg); background-position: 0% 50%;' ></div></div>
      <div id='photo7' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240712_090948734.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo8' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240710_124608957.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo9' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240714_043319121.jpg); background-position: 50% 50%;' ></div></div>
      <div id='photo10' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/IMG-20230602-WA0002.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo11' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230620_195615.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo12' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20221023_153542.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo13' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/20230619_112548.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo14' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240711_124517070.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo15' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240712_051523311.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo16' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240511_115149538.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo17' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240613_100115969.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo18' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240714_045737237.jpg);background-position: 50% 50%;' ></div></div>
      <div id='photo19' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/PXL_20240818_130441568.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo20' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212341_aa046eb3.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo21' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212244_c832a3a7.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo22' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212445_a2101a82.jpg);background-position: 30% 50%;'></div></div>
      <div id='photo23' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212757_2378f61e.jpg);background-position: 20% 50%;'></div></div>
      <div id='photo24' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/212916_4f33697d.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo25' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/213046_8aa38da1.jpg);background-position: 50% 50%;'></div></div>
      <div id='photo26' class="polaroid" ><div class='polaroidImage' style='background-image:url(images/213046_b5ee126a.jpg);background-position: 50% 50%;'></div></div>
    </div>

    <div id='confettiContainer'></div>

    <div id="content">
    </div>
    <div id="footer">
      <p>Website made by Josh</p>
    </div>
  </div>

  <!-- password dialog -->
  <div id='decryptionDialog' >
    <div id="decryptionDialogBox">
      <div id='decryptionDialogHeader' >Enter the password:</div>
      <input type='password' id='decryptionField'/>
      <button id='decryptionSubmit' ><div class="buttonIcon" style="background-image : url(images/lockOpen.svg);"></div> Submit</button>
    </div>
  </div>
</body>

</html>
